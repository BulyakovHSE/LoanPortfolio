@using LoanPortfolio.Db.Entities

<br />
<form method="post" action="~/Expense/Index">
    <input type="month" name="time" style="margin-right:5px" value="@Convert.ToDateTime(ViewBag.Time.ToString()).ToString("yyyy-MM")" />
    <button type="submit" class="btn">Поменять</button>
</form>

<div style="margin-bottom: 30px; margin-top: 30px;">
    <form action="~/Income/AddRegular">
        <div style="font-size: 2em; margin-bottom:10px">
            Финансовые задолженности
        </div>
    </form>

    <table class="table" style="margin-bottom: 0">
        <tr>
            <th>
                Дата платежа
            </th>
            <th>
                Сумма платежа
            </th>
            <th>
                Наименование кредитной организации
            </th>
            <th>
                Адрес банка или банкомата
            </th>
            <th>
            </th>
        </tr>
        @{
            foreach (Loan loan in ViewBag.Loan)
            {
                <tr>
                    <td>
                        @{Write(loan.ClearanceDate.ToString("dd.MM.yyyy"));}
                    </td>
                    <td>
                        @{Write(loan.AmountDie / loan.RepaymentPeriod);}
                    </td>
                    <td>
                        @{Write(loan.CreditInstitutionName);}
                    </td>
                    <td>
                        @{Write(loan.BankAddress);}
                    </td>
                    <td>
                        <button type="submit" class="btn">Оплачено</button>
                    </td>
                </tr>
            }
        }
    </table>
</div>

<div style="margin-bottom: 30px; margin-top: 30px;">
    <form action="~/Expense/AddHCS">
        <div style="font-size: 2em; margin-bottom:10px">
            ЖКХ
            <button type="submit" class="btn" style="margin-left: 5px;"><img src="~/Plus.png" style="height: 20px" /></button>
        </div>
    </form>

    <table class="table" style="margin-bottom: 0">
        <tr>
            <th>
                Дата
            </th>
            <th>
                Сумма
            </th>
            <th>
                Комментарий
            </th>
            <th style="width: 15%">
            </th>
        </tr>

        @{
            foreach (HCSExpense expense in ViewBag.HCS)
            {
                <tr>
                    <td>
                        @{Write(expense.DatePayment.ToString("dd.MM.yyyy"));}
                    </td>
                    <td>
                        @{Write(expense.Sum);}
                    </td>
                    <td>
                        @{Write(expense.Comment);}
                    </td>
                    <td>
                        <div style="display: flex;">
                            <form action="~/Expense/ChangeHCS/">
                                <input type="hidden" value="@expense.Id" name="id" />
                                <button type="submit" class="btn" style="margin-right: 15px"><img src="~/Edit.png" style="height: 25px" /></button>
                            </form>
                            <form action="~/Expense/Delete/">
                                <input type="hidden" value="@expense.Id" name="id" />
                                <button type="submit" class="btn"><img src="~/Delete.png" style="height: 25px" /></button>
                            </form>
                        </div>
                    </td>
                </tr>
            }
        }
    </table>
</div>

<div style="margin-bottom: 30px; margin-top: 30px;">
    <form action="~/Expense/AddPersonal">
        <div style="font-size: 2em; margin-bottom:10px">
            Личные
            <button type="submit" class="btn" style="margin-left: 5px;"><img src="~/Plus.png" style="height: 20px" /></button>
        </div>
    </form>

    <table class="table" style="margin-bottom: 0">
        <tr>
            <th>
                Категория
            </th>
            <th>
                Сумма
            </th>
            <th style="width: 15%">
            </th>
        </tr>

        @{
            foreach (PersonalExpense expense in ViewBag.Personal)
            {
                <tr>
                    <td>
                        @{Write(expense.ExpenseCategory);}
                    </td>
                    <td>
                        Сумма: @{Write(expense.Sum);}
                    </td>
                    <td>
                        <div style="display: flex;">
                            <form action="~/Expense/ChangePersonal/">
                                <input type="hidden" value="@expense.Id" name="id" />
                                <button type="submit" class="btn" style="margin-right: 15px"><img src="~/Edit.png" style="height: 25px" /></button>
                            </form>
                            <form action="~/Expense/Delete/">
                                <input type="hidden" value="@expense.Id" name="id" />
                                <button type="submit" class="btn"><img src="~/Delete.png" style="height: 25px" /></button>
                            </form>
                        </div>
                    </td>
                </tr>
            }
        }
    </table>
</div>
